<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="Считаем медь.css">
</head>

<body>

  <h2>Считаем перелив меди.</h2>

  <h3>До перелива меди.</h2>
  <div class="main">
    <p class="field">Цита 1: <input id="player1" name="input" value="Введи медь сливающего" onclick="this.value=''"></p>
    <p class="field">Цита 2: <input id="player2" name="input" value="Введи медь заливаемого" onclick="this.value=''"></p>
    <input type="button" id="elem" onclick="calculate(player1.value, player2.value)" value="Рассчитать" class="button">
    <p class="field">Разница: <input id="different" name="input" value="0" readonly=true></p>
    <p class="field">Сумма: <input id="sum" name="input" value="0" readonly=true></p>
  </div>
  <div class="main">
    <h3>После перелива меди.</h2>
    <p class="field">Цита 1: <input id="newplayer1" name="input" value="0" readonly=true></p>
    <p class="field">Цита 2: <input id="newplayer2" name="input" value="0" readonly=true></p>
    <p class="field">Разница: <input id="newdifferent" name="input" value="0" readonly=true></p>
    <p class="field">Сумма: <input id="newsum" name="input" value="0" readonly=true></p>
</div>
  <script>
    elem.style.rigth = player1.getBoundingClientRect().rigth+'px';
    document.addEventListener('keydown', function(event) {if (event.code == 'Enter' || event.code == 'NumpadEnter') {calculate(player1.value, player2.value)}});

    function calculate (p1, p2) {
      this.different.value = +player2.value - +player1.value;
      sum.value =  +player1.value + +player2.value;
      let newp1 = Number(p1);
      let newp2 = Number(p2);
      let different= newp2 - newp1;
      /* console.log(different); */
      while (true) {
        if (different > 400) {
          /* console.log('разница больше 400') */
          break;
        }
        if (different == 400) {
          /* console.log('разница 400') */
          break;
        }
        if (p1 == 0 || p2 == 0) {
          break;
        }
        newp1 -= 1;
        newp2 += 1;
        different = newp2 - newp1;
        if (newp1 == 1) break;
      }

      newplayer1.value = newp1;
      newplayer2.value = newp2;
      newdifferent.value = different;
      newsum.value = newp1 + newp2;
    }





  </script>
</body>

</html>
